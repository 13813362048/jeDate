/**
 @Name : jeDate v3.0 日期控件
 @Author: chen guojun
 @Date: 2016-8-1
 @QQ群：516754269
 @官网：http://www.jayui.com/jedate/ 或 https://github.com/singod/jeDate
 */
window.console&&(console=console||{log:function(){}}),function(a,b){"function"==typeof define&&define.amd?define(["jeDate"],b):"object"==typeof exports?module.exports=b(require("jeDate")):a.jeDate=b(a.jeDate)}(this,function(a){var f,b={},c=document,d=/\w+|d+/g,e=function(){function a(l,m){var n,o,p,q,r,s;if(m=m||document,!/^[\w\-_#]+$/.test(l)&&m.querySelectorAll)return b(m.querySelectorAll(l));if(-1<l.indexOf(",")){for(n=l.split(/,/g),o=[],p=0,q=n.length;q>p;++p)o=o.concat(a(n[p],m));return k(o)}if(n=l.match(e),o=n.pop(),q=(o.match(g)||i)[1],r=!q&&(o.match(f)||i)[1],p=!q&&(o.match(h)||i)[1],o=l.match(/\[(?:[\w\-_][^=]+)=(?:[\'\[\]\w\-_]+)\]/g),r&&!o&&!p&&m.getElementsByClassName)p=b(m.getElementsByClassName(r));else{if(p=!q&&b(m.getElementsByTagName(p||"*")),r&&(p=d(p,"className",RegExp("(^|\\s)"+r+"(\\s|$)"))),q)return(n=m.getElementById(q))?[n]:[];if(o)for(q=0;q<o.length;q++)r=(o[q].match(j)||i)[1],s=(o[q].match(j)||i)[2],s=s.replace(/\'/g,"").replace(/\-/g,"\\-").replace(/\[/g,"\\[").replace(/\]/g,"\\]"),p=d(p,r,RegExp("(^"+s+"$)"))}return n[0]&&p[0]?c(n,p):p}function b(a){try{return Array.prototype.slice.call(a)}catch(b){for(var c=[],d=0,e=a.length;e>d;++d)c[d]=a[d];return c}}function c(a,b,d){var o,p,q,j,k,l,m,n,e=a.pop();if(">"===e)return c(a,b,!0);for(j=[],k=-1,l=(e.match(g)||i)[1],m=!l&&(e.match(f)||i)[1],e=!l&&(e.match(h)||i)[1],n=-1,e=e&&e.toLowerCase();o=b[++n];){p=o.parentNode;do if(q=(q=(q=!e||"*"===e||e===p.nodeName.toLowerCase())&&(!l||p.id===l))&&(!m||RegExp("(^|\\s)"+m+"(\\s|$)").test(p.className)),d||q)break;while(p=p.parentNode);q&&(j[++k]=o)}return a[0]&&j[0]?c(a,j):j}function d(a,b,c){for(var e,d=-1,f=-1,g=[];e=a[++d];)c.test(e.getAttribute(b))&&(g[++f]=e);return g}var e=/(?:[\*\w\-\\.#]+)+(?:\[(?:[\w\-_][^=]+)=(?:[\'\[\]\w\-_]+)\])*|\*|>/gi,f=/^(?:[\w\-_]+)?\.([\w\-_]+)/,g=/^(?:[\w\-_]+)?#([\w\-_]+)/,h=/^([\w\*\-_]+)/,i=[null,null,null],j=/\[([\w\-_][^=]+)=([\'\[\]\w\-_]+)\]/,k=function(){var a=+new Date,b=function(){var b=1;return function(c){var d=c[a],e=b++;return d?!1:(c[a]=e,!0)}}();return function(c){for(var h,d=c.length,e=[],f=-1,g=0;d>g;++g)h=c[g],b(h)&&(e[++f]=h);return a+=1,e}}();return a}();return b.isType=function(a,b){return b=b.replace(/\b(\w)|\s(\w)/g,function(a){return a.toUpperCase()}),Object.prototype.toString.call(a)==="[object "+b+"]"},b.each=function(a,c){var d,e,f;if(b.isType(a,"array"))for(d=0,e=a.length;e>d&&c.call(a[d],d,a[d])!==!1;d++);else for(f in a)if(a.hasOwnProperty(f)&&c.call(a[f],f,a[f])===!1)break},b.attr=function(a,b,c){return"string"==typeof b&&"undefined"==typeof c?a.getAttribute(b):(a.setAttribute(b,c),this)},b.stopmp=function(a){return a=a||window.event,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,this},b.hasClass=function(a,b){return a=a||{},new RegExp("\\b"+b+"\\b").test(a.className)},b.addClass=function(a,c){return a=a||{},b.hasClass(a,c)||(a.className+=" "+c),a.className=a.className.replace(/^\s|\s$/g,"").replace(/\s+/g," "),this},b.removeClass=function(a,c){return a=a||{},b.hasClass(a,c)&&(a.className=a.className.replace(new RegExp("(\\s|^)"+c+"(\\s|$)"),"")),this},b.getStyle=function(a,b){var c=document.defaultView?window.getComputedStyle(a,null)[b]:a.currentStyle[b];return c},b.isShow=function(a,b){a.style.display=1!=b?"none":"block"},b.html=function(a,b){return"undefined"!=typeof b||void 0!==b&&1===a.nodeType?(a.innerHTML=b,this):a.innerHTML},b.text=function(a,b){if(void 0===b||1!==a.nodeType){var c=document.all?a.innerText:a.textContent;return c}return document.all?a.innerText=b:a.textContent=b,this},b.val=function(a,b){return void 0===b||1!==a.nodeType?a.value:(a.value=b,this)},b.bind=function(a,c,d){c=c.toLowerCase();var e=function(a){a.attachEvent?a.attachEvent("on"+c,function(){d.call(a,window.type)}):a.addEventListener(c,d,!1)};return a==document?e(document):b.each(a,function(a,b){e(b)})},b.docScroll=function(a){return a=a?"scrollLeft":"scrollTop",c.body[a]|c.documentElement[a]},b.winarea=function(a){return c.documentElement[a?"clientWidth":"clientHeight"]},b.digit=function(a){return 10>a?"0"+(0|a):a},b.parse=function(a,c,d){a=a.concat(c);var e="hh:mm"==b.parseCheck(d,!1).substring(0,5),f=2;return d.replace(/YYYY|MM|DD|hh|mm|ss/g,function(){var g=e?++f:a.index=0|++a.index;return b.digit(a[g])})},b.parseCheck=function(a,b){var c=[];return a.replace(/YYYY|MM|DD|hh|mm|ss/g,function(a){c.push(a)}),c.join(1==b?"-":":")},b.checkFormat=function(a){var b=[];return a.replace(/YYYY|MM|DD|hh|mm|ss/g,function(a){b.push(a)}),b.join("-")},b.parseMatch=function(a){var b=a.split(" ");return b[0].match(d)},b.checkDate=function(a){var b=a.match(/\w+|d+/g);if(isNaN(b[0])||isNaN(b[1])||isNaN(b[2]))return!1;if(b[1]>12||b[1]<1)return!1;if(b[2]<1||b[2]>31)return!1;if((4==b[1]||6==b[1]||9==b[1]||11==b[1])&&b[2]>30)return!1;if(2==b[1]){if(b[2]>29)return!1;if((0==b[0]%100&&0!=b[0]%400||0!=b[0]%4)&&b[2]>28)return!1}return!0},b.nowDate=function(a,c){var d=new Date(0|a?function(a){return 864e5>a?+new Date+864e5*a:a}(parseInt(a)):+new Date);return b.parse([d.getFullYear(),d.getMonth()+1,d.getDate()],[d.getHours(),d.getMinutes(),d.getSeconds()],c)},b.montharr=[1,2,3,4,5,6,7,8,9,10,11,12],b.weeks=["日","一","二","三","四","五","六"],b.isValHtml=function(a){return/textarea|input/.test(a.tagName.toLocaleLowerCase())},b.festival=function(a,b){var c="";switch(a){case"01.01":c="元旦";break;case"02.14":c="情人";break;case"03.08":c="妇女";break;case"05.01":c="劳动";break;case"06.01":c="儿童";break;case"08.01":c="建军";break;case"09.10":c="教师";break;case"10.01":c="国庆";break;case"12.24":c="平安";break;case"12.25":c="圣诞";break;default:c=b}return c},f={format:"YYYY-MM-DD hh:mm:ss",minDate:"1900-01-01 00:00:00",maxDate:"2099-12-31 23:59:59"},b.index=Math.floor(9e3*Math.random()),b.boxCell="#jedatebox",b.find=function(a){return e(b.boxCell+" "+a)},b.isBool=function(a){return void 0==a||1==a?!0:!1},b.initDate=function(a){var g,j,k,d=b.event,h=void 0==a.isinitVal||0==a.isinitVal?!1:!0;try{g=d.target||d.srcElement||{}}catch(i){g={}}j=function(d,g,h){if(!e(g)[0]){b.opts=a,b.format=a.format||f.format,minTime=b.opts.minDate||f.minDate,maxTime=b.opts.maxDate||f.maxDate,/\YYYY-MM-DD/.test(b.checkFormat(b.format))?(b.checkDate(minTime)?b.minDate=minTime:alert("最小日期不合法"),b.checkDate(maxTime)?b.maxDate=maxTime:alert("最大日期不合法")):(b.minDate=minTime,b.maxDate=maxTime);var i=c.createElement("div"),j=void 0==a.zIndex?999:a.zIndex;i.className="jedatebox",i.id=b.boxCell.replace(/\#/g,""),a.isDisplay&&b.attr(i,"date",!0),i.style.cssText=(1==h?"":"z-index:"+j)+";position:"+(1==h?"relative":"absolute")+";display:block;",d.appendChild(i)}},k=function(c){var d=b.nowDate(null,a.format||f.format);""==(b.val(c)||b.text(c))?b.isValHtml(c)?b.val(c,d):b.text(c,d):b.isValHtml(c)?b.val(c):b.text(c)},h&&b.each(e("body "+a.dateCell),function(a,b){k(b)}),d&&g.tagName?(b.stopmp(d),j(c.body,b.boxCell,!1),b.elemCell="string"==typeof a.dateCell?e(a.dateCell)[0]:a.dateCell,b.setHtml()):b.bind(e(a.dateCell),"click",function(a){b.stopmp(a),j(c.body,b.boxCell,!1),b.elemCell=this,b.setHtml()})},b.orien=function(a,c,d){var e,g=c.getBoundingClientRect();leris=g.right+a.offsetWidth/1.5>=b.winarea(1)?g.right-a.offsetWidth:g.left+(d?0:b.docScroll(1)),e=g.bottom+a.offsetHeight/1<=b.winarea()?g.bottom-1:g.top>a.offsetHeight/1.5?g.top-a.offsetHeight-1:b.winarea()-a.offsetHeight,a.style.left=leris+"px",a.style.top=Math.max(e+(d?0:b.docScroll())+1,1)+"px"},b.setHtml=function(){var l,m,n,o,p,q,r,s,t,a="",c="",f=new Date,g=b.nowDate(null,b.format),h=b.checkFormat(b.format),i="YYYY-MM"==h?!0:!1,j="hh-mm"==h.substring(0,5)?!0:!1,k=b.opts.isinitVal?b.isValHtml(b.elemCell)?b.val(b.elemCell):b.text(b.elemCell):""==(b.val(b.elemCell)||b.text(b.elemCell))?g:b.isValHtml(b.elemCell)?b.val(b.elemCell):b.text(b.elemCell);""==(b.val(b.elemCell)||b.text(b.elemCell))?(b.currDate=f,c=[f.getFullYear(),f.getMonth()+1,f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds()],b.ymdDate=c[0]+"-"+b.digit(c[1])+"-"+b.digit(c[2])):(l=k.match(d),j?(c="hh-mm"==h?[l[0],l[1],f.getSeconds()]:[l[0],l[1],l[2]],b.currDate=new Date(f.getFullYear(),f.getMonth(),f.getDate())):(c=[l[0],l[1],l[2],l[3],l[4],void 0==l[5]?f.getSeconds():l[5]],b.currDate=new Date(l[0],l[1],l[2]),b.ymdDate=c[0]+"-"+b.digit(c[1])+"-"+b.digit(c[2]))),j||(b.currMonth=""==(b.val(b.elemCell)||b.text(b.elemCell))?b.currDate.getMonth():b.currDate.getMonth()-1),m='<div class="jedatetop">'+(i?'<div class="jedateym" style="width:100%;"><i class="prev triangle ymprev"></i><span class="jedateyy"><em class="jedateyearmonth"></em></span><i class="next triangle ymnext"></i></div>':'<div class="jedateym" style="width:50%;"><i class="prev triangle yearprev"></i><span class="jedateyy" ym="24"><em class="jedateyear"></em><em class="pndrop"></em></span><i class="next triangle yearnext"></i></div><div class="jedateym" style="width:50%;"><i class="prev triangle monthprev"></i><span class="jedatemm" ym="12"><em class="jedatemonth"></em><em class="pndrop"></em></span><i class="next triangle monthnext"></i></div>')+"</div>",n=i?'<ul class="jedaym"></ul>':'<div class="jedatetopym" style="display: none;"><ul class="ymdropul"></ul><p><span class="jedateymchle">&#8592;</span><span class="jedateymchri">&#8594;</span><span class="jedateymchok">关闭</span></p></div>',o='<ol class="jedaol"></ol><ul class="jedaul"></ul>',p=i?'<div class="botflex jedatebtn"><span class="jedateok">确认</span><span class="jedatetodaymonth">本月</span><span class="jedateclear">清空</span></div>':'<div class="botflex jedatehmsshde"><ul class="jedatehms"><li><input type="text" /></li><i>:</i><li><input type="text" /></li><i>:</i><li><input type="text" /></li></ul></div><div class="botflex jedatebtn"><span class="jedateok">确认</span><span class="jedatetodaymonth">今天</span><span class="jedateclear">清空</span></div>',q='<div class="jedatebot">'+p+"</div>",r='<div class="jedateprophms '+(j?"jedatepropfix":"jedateproppos")+'"><div class="jedatepropcon"><div class="jedatehmstitle">时间选择<div class="jedatehmsclose">&times;</div></div><div class="jedateproptext">小时</div><div class="jedateproptext">分钟</div><div class="jedateproptext">秒数</div><div class="jedatehmscon jedateprophours"></div><div class="jedatehmscon jedatepropminutes"></div><div class="jedatehmscon jedatepropseconds"></div></div></div>',s=i?m+n+q:j?m+r+q:m+n+o+r+q,b.html(e(b.boxCell)[0],s),b.isBool(b.opts.isClear)?"":b.isShow(b.find(".jedatebot .jedateclear")[0],!1),i||(b.isBool(b.opts.isToday)?"":b.isShow(b.find(".jedatebot .jedatetodaymonth")[0],!1)),/\hh-mm/.test(h)?(t=function(a){var d;d=""!=b.val(b.elemCell)||""!=b.text(b.elemCell)?a?[c[0],c[1],c[2]]:[c[3],c[4],c[5]]:[b.currDate.getHours(),b.currDate.getMinutes(),b.currDate.getSeconds()],b.each(b.find(".jedatebot .jedatehms input"),function(a,c){b.val(c,b.digit(d[a])),b.isBool(b.opts.ishmsVal)?"":b.attr(c,"readOnly","true")})},j?(t(!0),b.text(b.find(".jedateyear")[0],b.currDate.getFullYear()+"年").text(b.find(".jedatemonth")[0],b.digit(b.currDate.getMonth()+1)+"月")):b.isBool(b.opts.isTime)?t(!1):(b.isShow(b.find(".jedatebot .jedatehmsshde")[0],!1),b.find(".jedatebot .jedatebtn")[0].style.width="100%")):(i||b.isShow(b.find(".jedatebot .jedatehmsshde")[0],!1),b.find(".jedatebot .jedatebtn")[0].style.width="100%"),/\YYYY-MM-DD/.test(h)&&(b.each(b.weeks,function(b,c){a+='<li class="weeks" data-week="'+c+'">'+c+"</li>"}),b.each(b.find(".jedaol"),function(c,d){b.html(d,a)}),b.getDateStr(b.currDate.getFullYear(),b.currMonth),b.chooseYM()),i&&(b.html(b.find(".jedaym")[0],b.onlyYMStr(c[0],c[1])),b.text(b.find(".jedateym .jedateyearmonth")[0],c[0]+"年"+b.digit(c[1])+"月"),b.onlyYMevents(c)),b.orien(e(b.boxCell)[0],b.elemCell),b.events(c)},b.onlyYMStr=function(a,c){var d="";return b.each(b.montharr,function(e,f){var g=b.parseMatch(b.minDate),h=b.parseMatch(b.maxDate),i=new Date(a,b.digit(f),"01"),j=new Date(g[0],g[1],g[2]),k=new Date(h[0],h[1],h[2]);d+=j>i||i>k?"<li class='disabled' "+(c==f?'class="action"':"")+' data-onym="'+a+"-"+b.digit(f)+'">'+a+"年"+b.digit(f)+"月</li>":"<li "+(c==f?'class="action"':"")+' data-onym="'+a+"-"+b.digit(f)+'">'+a+"年"+b.digit(f)+"月</li>"}),d},b.onlyYMevents=function(a){var c=b.find(".jedateym .ymprev"),d=b.find(".jedateym .ymnext"),e=parseInt(a[0]),f=parseFloat(a[1]);b.each([c,d],function(d,g){b.bind(g,"click",function(d){if(!b.hasClass(g,"disabled")){b.stopmp(d);var h=g==c?e-=1:e+=1;b.html(b.find(".jedaym")[0],b.onlyYMStr(h,f)),b.events(a)}})})},b.getDateStr=function(a,c){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,d=b.minDate.match(/\w+|d+/g),e=d[0]+d[1]+d[2],f=b.maxDate.match(/\w+|d+/g),g=f[0]+f[1]+f[2];for(b.html(b.find(".jedaul")[0],""),h=new Date(a,c,1),i=h.getFullYear(),j=h.getMonth(),b.attr(b.find(".jedateyear")[0],"year",j>11?i+1:i),b.text(b.find(".jedateyear")[0],(j>11?i+1:i)+"年"),b.attr(b.find(".jedatemonth")[0],"month",b.digit(j+1)),b.text(b.find(".jedatemonth")[0],b.digit(j+1)+"月"),k=function(a,c,d){var e=b.opts.marks,f=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1};return b.isType(e,"array")&&e.length>0&&f(e,a+"-"+c+"-"+d)?'<i class="marks"></i>':""},l=function(a,c){return b.opts.festival?b.festival(a,c):c},m=1-h.getDay(),1==m&&(m=-6),h.setDate(m),n=0;42>n;n++)o=document.createElement("li"),p=h.getFullYear(),q=h.getMonth(),r=h.getDate(),s=j>q?0==q?1:j:q==j?j+1:11==q?12:j+2,t=p==i?i:p>i?i+1:i-1,b.find(".jedaul")[0].appendChild(o),b.html(o,l(b.digit(s)+"."+b.digit(r),b.digit(r))+k(t,b.digit(s),b.digit(r))),b.attr(o,"year",t).attr(o,"month",b.digit(s)).attr(o,"day",b.digit(r)),o.dateVals=i+"-"+b.digit(q+1)+"-"+b.digit(r),u=(t+"-"+b.digit(s)+"-"+b.digit(r)).replace(/\-/g,""),v=t+"-"+b.digit(s)+"-"+b.digit(1),w=i+"-"+b.digit(q+1)+"-"+b.digit(1),q!=j&&b.addClass(o,"other"),parseInt(u)>=parseInt(e)&&parseInt(u)<=parseInt(g)&&q==j&&(""==(b.val(b.elemCell)||b.text(b.elemCell))?(x=b.currDate.getFullYear()+"-"+b.digit(b.currDate.getMonth()+1)+"-"+b.digit(1),b.ymdDate==o.dateVals&&b.currDate.getMonth()+1==q+1?b.addClass(o,"action"):x!=w&&v==o.dateVals&&b.addClass(o,"action")):(y=b.currDate.getFullYear()+"-"+b.digit(b.currDate.getMonth())+"-"+b.digit(1),b.ymdDate==o.dateVals&&b.currDate.getMonth()==q+1?b.addClass(o,"action"):y!=w&&v==o.dateVals&&b.addClass(o,"action"))),(parseInt(e)>parseInt(u)||parseInt(g)<parseInt(u))&&b.addClass(o,"disabled"),h.setDate(r+1);b.chooseDays()},b.chooseDays=function(){b.bind(b.find(".jedaul li"),"click",function(a){var f,g,h,i,c=this,d=[],e=b.elemCell;b.hasClass(c,"disabled")||(b.stopmp(a),b.each(b.find(".jedatehms input"),function(a,c){d.push(b.val(c))}),f=parseInt(b.attr(c,"year")),g=parseFloat(b.attr(c,"month")),h=parseFloat(b.attr(c,"day")),i=b.parse([f,g,h],[d[0],d[1],d[2]],b.format),b.isValHtml(e)?b.val(e,i):b.text(e,i),b.dateClose(),(b.isType(b.opts.choosefun,"function")||null!=b.opts.choosefun)&&b.opts.choosefun&&b.opts.choosefun(b.elemCell,i))})},b.setStrhms=function(){var j,k,l,m,a=b.format,c=[],e=b.find(".jedatehms li"),f=b.find(".jedatepropcon .jedateproptext"),g=b.find(".jedatepropcon .jedatehmscon"),h=function(a){var b=a.match(d).join("-"),c="YYYY-MM-DD-hh-mm"==b?a.split(" "):b,e="YYYY-MM-DD-hh-mm"==b?c[1]:c;return e.match(d).join("-")},i="hh-mm"==h(a);return i&&(j=b.getStyle(e[0],"width").replace(/\px|em|rem/g,""),k=b.getStyle(b.find(".jedatehms i")[0],"width").replace(/\px|em|rem/g,""),l=b.getStyle(f[0],"width").replace(/\px|em|rem/g,""),m=Math.round(parseInt(j)+parseInt(j)/2+parseInt(k)/2+1),e[0].style.width=e[1].style.width=m+"px",f[0].style.width=f[1].style.width=g[0].style.width=g[1].style.width=Math.round(parseInt(l)+parseInt(l)/2+2)+"px"),b.each([24,60,60],function(a,d){var m,n,h="",j="",k=b.find(".jedatehms input"),l=b.val(k[a]);for(b.attr(k[a],"maxlength",2).attr(k[a],"numval",d-1).attr(k[a],"item",a),m=0;d>m;m++)m=b.digit(m),b.opts.ishmsLimit?j=l>m?"disabled":m==l?"action":"":(j=i&&2==a?l==m?"disabled action":"disabled":l==m?"action":"",i&&2==a&&(n=e[2],n.style.display="none",n.previousSibling.style.display="none",f[a].style.display=g[a].style.display="none")),h+='<p class="'+j+'">'+m+"</p>";c.push(h)}),c},b.dateClose=function(){c.body.removeChild(e(b.boxCell)[0])},b.chooseYM=function(){function j(a){var c="";return b.each(new Array(15),function(d){if(7===d){var f=b.attr(e[0],"year");c+="<li "+(f==a?'class="action"':"")+' yy="'+a+'">'+a+"年</li>"}else c+='<li yy="'+(a-7+d)+'">'+(a-7+d)+"年</li>"}),c}function k(c,d){var e="";12==d?(b.each(b.montharr,function(a,c){var d=b.attr(f[0],"month"),c=b.digit(c);e+="<li "+(d==c?'class="action"':"")+' mm="'+c+'">'+c+"月</li>"}),b.each([g,h],function(a,c){b.isShow(c[0],!1)})):(e=j(c),b.each([g,h],function(a,c){b.isShow(c[0],!0)})),b.removeClass(a[0],12==d?"jedatesety":"jedatesetm").addClass(a[0],12==d?"jedatesetm":"jedatesety"),b.html(b.find(".jedatetopym .ymdropul")[0],e),b.isShow(a[0],!0)}function l(c){b.bind(b.find(".ymdropul li"),"click",function(){var e=b.attr(this,"yy"),g=parseInt(b.attr(f[0],"month"))-1;b.attr(c,"year",e),b.html(c,e+"年"),b.isShow(a[0],!1),b.getDateStr(e,g)})}var m,a=b.find(".jedatetopym"),c=b.find(".jedateyy"),d=b.find(".jedatemm"),e=b.find(".jedateyy .jedateyear"),f=b.find(".jedatemm .jedatemonth"),g=b.find(".jedateymchri"),h=b.find(".jedateymchle"),i="hh-mm"==b.checkFormat(b.format).substring(0,5)?!0:!1;!i&&b.bind(c,"click",function(){var a=parseInt(b.attr(this,"ym")),c=parseInt(b.attr(e[0],"year"));k(c,a),l(e[0])}),!i&&b.bind(d,"click",function(){var c=parseInt(b.attr(this,"ym")),d=parseInt(b.attr(e[0],"year"));k(d,c),b.bind(b.find(".ymdropul li"),"click",function(){var d=b.attr(e[0],"year"),g=parseInt(b.attr(this,"mm"))-1;b.attr(f[0],"month",g),b.html(f[0],g+"月"),b.isShow(a[0],!1),b.getDateStr(d,g)})}),b.bind(b.find(".jedateymchok"),"click",function(c){b.stopmp(c),b.isShow(a[0],!1)}),m=parseInt(b.attr(e[0],"year")),b.each([h,g],function(a,c){b.bind(c,"click",function(c){b.stopmp(c),0==a?m-=15:m+=15;var d=j(m);b.html(b.find(".jedatetopym .ymdropul")[0],d),l(e[0])})})},b.events=function(a){var n,o,p,q,r,s,d=new Date,f=b.find(".yearprev"),g=b.find(".yearnext"),h=b.find(".monthprev"),i=b.find(".monthnext"),j=b.find(".jedateyear"),k=b.find(".jedatemonth"),l="YYYY-MM"==b.checkFormat(b.format)?!0:!1,m="hh-mm"==b.checkFormat(b.format).substring(0,5)?!0:!1;l?(s=b.elemCell,b.bind(b.find(".jedaym li"),"click",function(a){var d,e,c=this;b.hasClass(c,"disabled")||(b.stopmp(a),d=b.attr(this,"data-onym").match(/\w+|d+/g),e=b.parse([d[0],d[1],1],[0,0,0],b.format),b.isValHtml(s)?b.val(s,e):b.text(s,e),b.dateClose(),(b.isType(b.opts.choosefun,"function")||null!=b.opts.choosefun)&&b.opts.choosefun(b.elemCell,e))}),b.bind(b.find(".jedatebot .jedatetodaymonth"),"click",function(a){b.stopmp(a);var c=[d.getFullYear(),d.getMonth()+1,d.getDate()],e=b.parse([c[0],c[1],0],[0,0,0],b.format);b.isValHtml(s)?b.val(s,e):b.text(s,e),b.dateClose(),(b.isType(b.opts.choosefun,"function")||null!=b.opts.choosefun)&&b.opts.choosefun(b.elemCell,e)})):(!m&&b.each([f,g],function(a,c){b.bind(c,"click",function(a){b.stopmp(a);var d=parseInt(b.attr(b.find(".jedateyear")[0],"year"));c==f?b.getDateStr(--d,b.currMonth):b.getDateStr(++d,b.currMonth)})}),!m&&b.each([h,i],function(a,c){b.bind(c,"click",function(a){b.stopmp(a),c==h?b.getDateStr(b.currDate.getFullYear(),--b.currMonth):b.getDateStr(b.currDate.getFullYear(),++b.currMonth)})}),n=b.setStrhms(),o=function(a){b.each(a,function(a,c){""==b.html(c[0])&&b.html(c[0],n[a])}),m?(b.isShow(b.find(".jedatehmsclose")[0],!1),b.isShow(b.find(".jedatetodaymonth")[0],!1)):b.isShow(b.find(".jedateprophms")[0],!0),b.each(["hours","minutes","seconds"],function(a,c){var f,d=b.find(".jedateprop"+c),e=b.find(".jedateprop"+c+" .action");d[0].scrollTop=e[0].offsetTop-118,f=b.find(".jedateprop"+c+" p"),b.bind(f,"click",function(){var c=this;b.hasClass(c,"disabled")||(b.each(f,function(a,c){b.removeClass(c,"action")}),b.addClass(c,"action"),b.val(b.find(".jedatebot .jedatehms input")[a],b.digit(b.text(c))),m||b.isShow(b.find(".jedateprophms")[0],!1))})})},p=b.find(".jedateprophours"),q=b.find(".jedatepropminutes"),r=b.find(".jedatepropseconds"),m?o([p,q,r]):b.bind(b.find(".jedatehms"),"click",function(){"block"!==b.find(".jedateprophms")[0].style.display&&o([p,q,r]),b.bind(b.find(".jedateprophms .jedatehmsclose"),"click",function(){b.isShow(b.find(".jedateprophms")[0],!1)})}),b.bind(b.find(".jedatebot .jedatetodaymonth"),"click",function(){var a=[d.getFullYear(),d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds()],c=b.parse([a[0],a[1],a[2]],[a[3],a[4],a[5]],b.format),e=b.elemCell;b.getDateStr(a[0],a[1],a[2]),b.isValHtml(e)?b.val(e,c):b.text(e,c),b.dateClose(),(b.isType(b.opts.choosefun,"function")||null!=b.opts.choosefun)&&b.opts.choosefun(b.elemCell,c),l||b.chooseDays()})),b.bind(b.find(".jedatehms input"),"keyup",function(){var a=this,c=a.value,d=parseInt(b.attr(a,"numval")),e=parseInt(b.attr(a,"item"));b.val(a,c.replace(/\D/g,"")),a.value>d&&(b.val(a,d),alert("输入值不能大于"+d)),""==this.value&&b.val(a,"00"),b.each(b.find(".jedatehmscon")[e].childNodes,function(a,c){b.removeClass(c,"action")}),b.addClass(b.find(".jedatehmscon")[e].childNodes[parseInt(a.value.replace(/^0/g,""))],"action"),b.each(["hours","minutes","seconds"],function(a,c){var d=b.find(".jedateprop"+c),e=b.find(".jedateprop"+c+" .action");d[0].scrollTop=e[0].offsetTop-118})}),b.bind(b.find(".jedatebot .jedateclear"),"click",function(a){b.stopmp(a);var c=b.elemCell,d=b.isValHtml(c)?b.val(c):b.text(c);b.isValHtml(c)?b.val(c,""):b.text(c,""),b.dateClose(),""!=d&&(b.isType(b.opts.clearfun,"function")||null!=b.opts.clearfun)&&b.opts.clearfun(b.elemCell[0],d)}),b.bind(b.find(".jedatebot .jedateok"),"click",function(c){var e,f,g,h,i,n,o,p,q,r,s,t;b.stopmp(c),e=b.elemCell,f=""!=(b.val(e)||b.text(e)),g=function(){var a=[];return b.each(b.find(".jedatehms input"),function(c,d){a.push(b.val(d))}),a},f?(h=l?b.find(".jedaym li"):b.find(".jedaul li"),i=b.isValHtml(e)?b.val(e):b.text(e),n=i.match(/\w+|d+/g),l?(r=f?b.attr(b.find(".jedaym .action")[0],"data-onym").match(/\w+|d+/g):"",q=f?b.parse([r[0],r[1],1],[0,0,0],b.format):""):(o=g(),p=[parseInt(b.attr(j[0],"year")),parseInt(b.attr(k[0],"month")),n[2]],q=f?b.parse([p[0],p[1],p[2]],[o[0],o[1],o[2]],b.format):"",m||b.getDateStr(p[0],p[1])),m?b.isValHtml(e)?b.val(e,q):b.text(e,q):b.each(h,function(a,c){"action"==b.attr(c,"class")&&(b.isValHtml(e)?b.val(e,q):b.text(e,q))}),b.dateClose(),""!=q&&(b.isType(b.opts.okfun,"function")||null!=b.opts.okfun)&&b.opts.okfun(b.elemCell,q),l||b.chooseDays()):(s=g(),q="",m?q=b.parse([a[0],a[1],a[2]],[s[0],s[1],s[2]],b.format):(t=[d.getFullYear(),d.getMonth()+1,d.getDate(),s[0],s[1],s[2]],q=b.parse([t[0],t[1],t[2]],[t[3],t[4],t[5]],b.format)),b.isValHtml(e)?b.val(e,q):b.text(e,q),b.dateClose())}),b.bind(document,"mouseup",function(a){b.stopmp(a);var d=e(b.boxCell)[0];d&&"none"!==d.style.display&&c.body.removeChild(d)}),b.bind(e(b.boxCell),"mouseup",function(a){b.stopmp(a)})},a=function(c){try{b.event=window.event?window.event:a.caller.arguments[0]}catch(d){}return new b.initDate(c||{})},a.version="3.0",a.now=function(a){var c,d,e,f,g,h,i,j;return"string"==typeof a?c=new Date(1e3*parseInt(a)):(a=0|a,c=new Date,d=c.getTime()+864e5*a,c.setTime(d)),e=c.getFullYear(),f=c.getMonth()+1,g=c.getDate(),h=c.getHours(),i=c.getMinutes(),j=c.getSeconds(),e+"-"+b.digit(f)+"-"+b.digit(g)+" "+b.digit(h)+":"+b.digit(i)+":"+b.digit(j)},a.addDate=function(a,c,e){c=0|c,e=e||"DD";var h,f=a.match(d),g=new Date,i=parseInt(f[0]),j=void 0==f[1]?g.getMonth()+1:parseInt(f[1]),k=void 0==f[2]?g.getDate():parseInt(f[2]),l=void 0==f[3]?g.getHours():parseInt(f[3]),m=void 0==f[4]?g.getMinutes():parseInt(f[4]),n=void 0==f[5]?g.getMinutes():parseInt(f[5]),o=new Date(i,b.digit(j),b.digit(k),b.digit(l),b.digit(m),b.digit(n));switch(e){case"DD":h=864e5*c;break;case"hh":h=36e5*c;break;case"mm":h=6e4*c}return o.setTime(o.getTime()+h),b.parse([o.getFullYear(),o.getMonth(),o.getDate()],[o.getHours(),o.getMinutes(),o.getSeconds()],b.format)},a});
